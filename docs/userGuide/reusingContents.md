<frontmatter>
  title: "User Guide: Reusing Contents"
  footer: footer.md
  siteNav: userGuideSections.md
</frontmatter>

<include src="../common/header.md" />

<div class="website-content">

# Reusing Contents

<span class="lead" id="overview">

**MarkBind is highly-optimized for content reuse**. It offers several mechanisms to provide readers with many variations of the content while minimizing duplication at source file level. As a result, instead of creating a one-size-fits-all site, MarkBind can create a site in which readers can chart their own path of reading.
</span>

## Using Variables

<span id="variables-overview">

**MarkBind variables are ideal for reusing small bits of code** in multiple places; you can define a variable to represent the code bit in question and reuse it anywhere in the site by referring the variable instead of duplicating the code bit.
</span>

<span id="variables-link" class="d-none">

More info: [_User Guide: Reusing Contents → Using Variables_]({{ baseUrl }}/userGuide/reusingContents.html#using-variables)
</span>

**Variables are to be defined in the `_markbind/variables.md` file.** Each variable must have an `id` and the value can be any MarkBind-compliant code fragment. The `id` should not contain `-` and `.`. For example, `search-option` and `search.options` are not allowed.

<div class="indented">

{{ icon_example }} Here's how you can define two variables `year` and `options`:

```html
<span id="year">2018</span>

<span id="options">
* yes
* no
* maybe
</span>
```
</div>

To include a variable value in your code, give the variable id enclosed in double curly braces.

<div class="indented">

{{ icon_example }} Here's how you can use the variable `year`:

<code>The year was {<span></span>{ year }}.</code> {{ icon_arrow_right }} The year was 2018.

</div>

==MarkBind variables are _global_==; they are available from anywhere in the code base.

**MarkBind provides a number of built-in variables.**


##### Built-in Variable: `baseUrl`

Represents the root directory of the project. Used for specifying intra-site links.

<panel type="seamless" header="User Guide: MarkBind Syntax → Intra-Site Links">
  <include src="markbindSyntax.md#intraSiteLinks" />
</panel>


##### Built-in Variable: `timestamp`

<code>{<span></span>{ timestamp }}</code> is the time stamp (in UTC) that indicates when the page was generated.

<div class="indented">
{{ icon_example }} <code>Page generated at: {<span></span>{ timestamp }}</code> {{ icon_arrow_right }} Page generated at: {{ timestamp }}
</div>

<p/>


##### Built-in Variable: `MarkBind`

<code>{<span></span>{MarkBind}}</code> represents a code snippet that specifies the MarkBind version in use and is linked to the MarkBind website.

<div class="indented">
{{ icon_example }} <code>Page generated by: {<span></span>{ MarkBind }}</code> {{ icon_arrow_right }} Page generated by: {{ MarkBind }}
</div>

<p/>


##### Built-in Variables: Icon Fonts

As mentioned in _User Guide: MarkBind Syntax_, you can use built-in variables to access icon fonts.

<panel type="seamless" header="%%**User Guide: MarkBind Syntax → Icon Fonts**%%" popup-url="{{ baseUrl }}/userGuide/markBindSyntax.html#icons-fonts">
  <include src="markBindSyntax.md#iconFonts" />
</panel>

<p/>


##### Variables: Tips and Tricks

**Variables can refer to other variables** that are declared earlier, including built-in variables.

<div class="indented">

{{ icon_example }} This variable uses a built-in variable:<br>
<code>\<span id="right_hand">{<span></span>{ glyphicon_hand_right }}\</span></code>

Here, the second variable will be assigned the contents of the first variable.<br>
<code>\<span id="first">These is the first variable.\</span></code><br>
<code>\<span id="second">{<span></span>{ first }}\</span></code><br>

This will not work, as the `fourth` variable is declared _below_ the line that refers to it.<br>
<code>\<span id="third">{<span></span>{ fourth }}\</span></code> :x:<br>
<code>\<span id="fourth">This is the fourth variable.\</span></code>
</div>

Note that if the variable being referenced contains HTML tags, MarkBind may escape the tags and render it literally.

<div class="indented">

{{ icon_example }} If we declare the variables as follows,<br>

<code>\<span id="right_hand">{<span></span>{ glyphicon_hand_right }}\</span></code><br>
<code>\<span id="right_hand_2">{<span></span>{ right_hand }}\</span></code>

the result will be,<br>

<code>{<span></span>{ right_hand_2 }}</code> {{ icon_arrow_right }} \<span class='glyphicon glyphicon-hand-right' aria-hidden='true'></span>
</div>

You must use the `safe` filter when using such variables:

<div class="indented">

{{ icon_example }} If we use the safe filter for the second variable:<br>

<code>\<span id="right_hand">{<span></span>{ glyphicon_hand_right }}\</span></code><br>
<code>\<span id="right_hand_2">{<span></span>{ right_hand | safe }}\</span></code>

<code>{<span></span>{ right_hand_2 }}</code> {{ icon_arrow_right }} {{glyphicon_hand_right}}
</div>

<hr><!-- ======================================================================================================= -->

## The `include` tag

<span id="include-overview">

**MarkBind has a powerful `<include>` mechanism** which allows you to create documents by combining other content fragments.
</span>

<span id="include-link" class="d-none">

More info: [_User Guide: Reusing Contents → The `include` Tag_]({{ baseUrl }}/userGuide/reusingContents.html#the-include-tag)
</span>

**You can use `<include>` tag to include another markdown or HTML document into the current document.**

<div class="indented">

{{ icon_example }} Including text from a `tip2.md` in another file.
```html
Tip 1. ...
<include src="tips/tip2.md" />
Tip 3. ...
```
</div>

Attributes:
* `src`: specify the source file path.
* `inline` (optional): make the included result an inline element. (wrapped in `<span>` tag). e.g.,
  ```html
  <include src="../docs/summary.md" inline />
   ```
* `optional` (optional): include the document only if it exists i.e., there will be no error message if the file does not exist. e.g.,
  ```html
  <include src="UserStories.md" optional />
  ```
* `trim` (optional): remove leading and trailing whitespace and newlines from the document before including.
  ```html
  <include src="frament.md" trim />
  ```

**You can `<include>` a fragment of a file** by specifying the `#fragment-id` at the end of the `src` attribute value, provided the fragment is wrapped in a `<div>`/`<span>`/`<seg>` tag with the matching `id`.

<div class="indented">

{{ icon_example }} Including a fragment from a file:
```html
Some text
<include src="docs/tips.md#tip-1" />
Some other text
```

`docs/tips.md`:
```html
...
<div id="tip-1" />
  Tip 1. ...
  ...
</div>
Tip 2. ...
```
</div>

<box type="warning">

When setting the `id` of a fragment, be careful not to clash with heading anchor IDs auto-generated by MarkBind. For example, if you have a heading `## Some Useful Tips`, MarkBind will auto-generate an ID `some-useful-tips` for that heading.

</box>


<box border-left-color="{{ markbind_blue}}">

{{ icon_bulb_blue }} The `<include>` tag works for any MarBind source file including the _font matter_ section but it may not work in some _special_ files such as the `_markbind/variables.md`.
</box>

##### `<include>` Inside an Included File

**Although the `src` attribute of an `<include>` is given _relative_ to the current directory, it is converted to an _absolute_ value _before_ the <tooltip content="i.e., the file containing the `<include>`">host file</tooltip> is included from another file.**

<div class="indented">

{{ icon_example }} Suppose you have a MarkBind project with the following file structure.
```
c:/mySite/
  ├── bookFiles/
  |      ├── book.md
  |      ├── chapter1.md
  |      └── chapter2.md
  └── reviewFiles/
         └── review.md
```
The `book.md`:
```markdown
# My Book
<include src="chapter1.md" />
<include src="chapter2.md" />
```
The `review.md`:

```markdown
# My Review
<include src="../bookFiles/book.md" />
...
```

The content of the `chapter1.md` and `chapter2.md` will be included in the `review.md` (via `<include src="../bookFiles/book.md" />`) although `chapter1.md` and `chapter2.md` are not in `reviewFiles` directory. i.e., `<include src="chapter1.md" />` will be interpreted as `<include src="c:/mySite/bookFiles/chapter1.md" />`
</div>

In other words, **`<include>` interprets the reused code relative to the original location of the file, not the location in which it is reused.**

<hr><!-- ======================================================================================================= -->

## Using Boilerplate Files

**If you find duplicating a <tooltip content="code that needs to stay relative to the directory in which it used">_boilerplate code_</tooltip> fragment in multiple places of your code base, you can use a `boilerplate` file to avoid such duplication.** Note that you cannot use a normal `<include>` in this case because the code included using a normal `<include>` stays relative to the original location while boilerplate code needs to be interpreted relative to the location it is being used.

<div class="indented">

{{ icon_example }} Suppose you have a MarkBind project with the following file structure.
```
c:/mySite/
  ├── chapter1/
  |      ├── chapter.md
  |      ├── text.md
  |      └── exercises.md
  ├── chapter2/
  |      ├── chapter.md
  |      ├── text.md
  |      └── exercises.md
  └── book.md
```
The `book.md`:
```markdown
# My Book
<include src="chapter1/chapter.md" />
<include src="chapter2/chapter.md" />
```
The `chapter1/chapter.md`:

```markdown
## Text
<include src="text.md" />
## Exercises
<include src="exercises.md" />
```
The `chapter2/chapter.md`:

```markdown
## Text
<include src="text.md" />
## Exercises
<include src="exercises.md" />
```

As you can see, both `chapter.md` files are exactly the same. If we were to use only one of the `chapter.md` files and `<include>` it twice in the `book.md`, we'll end up with the same chapter content duplicated twice, which is not what we want. In other words, `chapter.md` contains boilerplate code that needs to be interpreted relative to where it is applied, once relative to `chapter1` directory and once relative to `chapter2` directory.
</div>

To use a code fragment as a boilerplate file,
1. Put the code in a file inside the `_markbind/boilerplates` directory.
2. `<include>` the file _as if_ a copy of it exists in any directory you want it to applied, but add the `boilerplate` attribute to the `<include>` tag.

<div class="indented">

{{ icon_example }} Here's how you can use a boilerplate file to avoid duplicating the `chapter.md`:
```
c:/mySite/
  ├── _markbind/boilerplates/
  |      └── chapter.md
  ├── chapter1/
  |      ├── text.md
  |      └── exercises.md
  ├── chapter2/
  |      ├── text.md
  |      └── exercises.md
  └── book.md
```
The `book.md`:
```markdown
# My Book
<include src="chapter1/chapter.md" boilerplate />
<include src="chapter2/chapter.md" boilerplate />
```
The `_markbind/boilerplates/chapter.md`:

```markdown
## Text
<include src="text.md" />
## Exercises
<include src="exercises.md" />
```

Consider the line `<include src="chapter1/chapter.md" boilerplate />`. Note how you can use `src="chapter1/chapter.md"` there is no such file. MarkBind will use the `chapter.md` file `/_markbind/boilerplates/` but interpret it as if the file exist in `chapter1` directory (i.e., interpret the `chapter1.md` code relative to the `chapter1` directory.

Similarly, `<include src="chapter2/chapter.md" boilerplate />` interprets the `chapter.md` relative to the `chapter2` directory.
</div>

If you have many boilerplate files, you can organize them into directories inside the `_markbind` directory. When using such boilerplate files, you need to replace `boilerplate` attribute with `boilerplate="<path to file relative to _markbind/boilerplates>"`.

<div class="indented">

{{ icon_example }} Suppose the `chapter.md` is places in a `book` directory:
```
c:/mySite/
  └── _markbind/boilerplates/
         └── book/
               └── chapter.md

```

It needs to be used as follows:
```markdown
<include src="chapter1/chapter.md" boilerplate="book/chapter.md" />
<include src="chapter2/chapter.md" boilerplate="book/chapter.md" />
```
</div>

<hr>

## Reusing Contents Across Sites

**MarkBind supports reusing across sites.** It allows you include the pages you want from a _sub-site_ in another _main-site_ without having to change anything in the source files of the _sub-site_ as long as the sub-site source files are inside the directory of the _main site_.

<div class="indented">

{{ icon_example }} Suppose you have a site `textbook` and you want to include some pages from it in another site `course`. Given below is how you can locate the sub-site `textbook` inside the root directory of the main-site `course` so that files from `textbook` can be reused in the `course` site.
```
c:/course/
  ├── textbook/
  |      ├── index.md
  |      ├── overview.md
  |      └── site.json
  ├── index.md
  ├── reading.md
  └── site.json
```

`reading.md` (note how it reuses content from the sub-site `textbook`):
```markdown
# Week 1 Reading:
<include src="textbook/overview.md" />
```
</div>

<box border-left-color="{{ markbind_blue}}">

{{ icon_bulb_blue }} If you are using Git for version control, you can set up the sub-site repository as a [Git sub-module](https://git-scm.com/book/en/v2/Git-Tools-Submodules) of the main site repository.
</box>

<hr><!-- ======================================================================================================= -->

## Creating Content Variations

**MarkBind can create sites that give more control to the reader.** Given below are some mechanisms authors can use to create variations of content that gives more control to the reader in charting their own path through the content.


#### Allowing users to remove some contents

When the readers can remove an item from a page, they can create their own version of the page by removing items they don't want to see. This is especially useful when printing a page.

To make an element closeable, use `v-closeable`.

<div class="indented">

```html
<div v-closeable>

Optional video:

@[youtube](v40b3ExbM0c)

</div>
```

This is how the content will appear. Note how you can hover over the content to access the :x: button that can collapse the content.
<div v-closeable>

Optional video:

@[youtube](v40b3ExbM0c)

</div>

</div>

#### Giving alternative contents

You can use a [_Tabs_ component]({{ baseUrl }}/userGuide/usingComponents.html#tabs) to give alternative versions of content, for example, giving a code snippet in different programming languages.

#### Giving access to additional contents

You can use following components to give readers an option to access additional content at their discretion.
* [Tooltips]({{ baseUrl }}/userGuide/usingComponents.html#tooltip), [Popovers]({{ baseUrl }}/userGuide/usingComponents.html#popover), [Modals]({{ baseUrl }}/userGuide/usingComponents.html#modal)
* [Expandable Panels]({{ baseUrl }}/userGuide/usingComponents.html#panel)

#### Organizing contents in alternative ways

You can take advantage of [MarkBinds feature for content reuse]({{ baseUrl }}/userGuide/reusingContents.html), you can organize content in alternative ways to cater for different readers, without having to duplicate content. For example, you can have different pages that organizes the same information alphabetically, chronologically, by difficulty, group information by topic, etc.

#### Optimizing the Print View

To <span class="keyword">hide minimized panels in the _print view_</span>, add the following code to a CSS file used in your site.

```css
@media print {
    .card-container > .morph {
        display: none;
    }
}
```

#### Hiding some info in the generated content

To permanently hide a fragment from the reader:

```html
<span class="d-none">
  content to hide ...
</span>

<panel header="..." add-class="d-none">
  content to hide ...
<panel>
```

To hide a fragment in one specific page, 'mark' the elements using a `class`:
```html
<span class="extra">
  content to hide ...
</span>
```

Then, in a page-specific CSS file,
```css
.extra {
  display: none; /* 'block' or 'inline-block' if you want it to show */
}
```

</div>
